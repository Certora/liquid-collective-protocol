{
  "address": "0xB4669c8B41591BB20566a35Bc579C37EbE5837b9",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "governor_",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "executor_",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "destination_",
          "type": "address"
        },
        {
          "internalType": "bytes4[]",
          "name": "executorCallableSelectors_",
          "type": "bytes4[]"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "caller",
          "type": "address"
        }
      ],
      "name": "Unauthorized",
      "type": "error"
    },
    {
      "stateMutability": "payable",
      "type": "fallback"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newExecutor",
          "type": "address"
        }
      ],
      "name": "changeExecutor",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newGovernor",
          "type": "address"
        }
      ],
      "name": "changeGovernor",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "executor",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "governor",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "functionSelector",
          "type": "bytes4"
        },
        {
          "internalType": "bool",
          "name": "executorCanCall_",
          "type": "bool"
        }
      ],
      "name": "permissionFunction",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "transactionHash": "0x3d71ed79d8258d5cc06f3635de7d49a58b677fd29a32c8045b0920de24e3e7ea",
  "receipt": {
    "to": null,
    "from": "0x92D7d6DADe15fcF369534cEb8CD1A27f97185ab3",
    "contractAddress": "0xB4669c8B41591BB20566a35Bc579C37EbE5837b9",
    "transactionIndex": 6,
    "gasUsed": "451240",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x9089f863229636d48e14449cfd1950fd0b560064f10ed1c37e6a68700c2b0810",
    "transactionHash": "0x3d71ed79d8258d5cc06f3635de7d49a58b677fd29a32c8045b0920de24e3e7ea",
    "logs": [],
    "blockNumber": 6946935,
    "cumulativeGasUsed": "2179313",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x71c9DAb681C209bb82270906e3B49388b2C15404",
    "0x71c9DAb681C209bb82270906e3B49388b2C15404",
    "0x507b8e603485A0DCf0C59DB810Dc0BdD790a783d",
    [
      "0xca6d56dc",
      "0x0b1ca49a",
      "0xc1ba4e59",
      "0xe90b2da1",
      "0x91f10da0"
    ]
  ],
  "numDeployments": 3,
  "solcInputHash": "7033459a833c3a6a9cee0bc416b032e6",
  "metadata": "{\"compiler\":{\"version\":\"0.8.10+commit.fc410830\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"governor_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"executor_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"destination_\",\"type\":\"address\"},{\"internalType\":\"bytes4[]\",\"name\":\"executorCallableSelectors_\",\"type\":\"bytes4[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"caller\",\"type\":\"address\"}],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newExecutor\",\"type\":\"address\"}],\"name\":\"changeExecutor\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newGovernor\",\"type\":\"address\"}],\"name\":\"changeGovernor\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"executor\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"governor\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"functionSelector\",\"type\":\"bytes4\"},{\"internalType\":\"bool\",\"name\":\"executorCanCall_\",\"type\":\"bool\"}],\"name\":\"permissionFunction\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"author\":\"Figment\",\"kind\":\"dev\",\"methods\":{\"changeExecutor(address)\":{\"details\":\"Change the executor\"},\"changeGovernor(address)\":{\"details\":\"Change the governor\"},\"permissionFunction(bytes4,bool)\":{\"details\":\"make a function either only callable by the governor, or callable by gov and executor.\"}},\"title\":\"Firewall\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"This contract accepts calls to admin-level functions of an underlying contract, and         ensures the caller holds an appropriate role for calling that function. There are two roles:          - A Governor can call anything          - An Executor can call specific functions specified at construction         Random callers cannot call anything through this contract, even if the underlying function         is unpermissioned in the underlying contract.         Calls to non-admin functions should be called at the underlying contract directly.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/Firewall.sol\":\"Firewall\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":1000},\"remappings\":[]},\"sources\":{\"contracts/src/Firewall.sol\":{\"content\":\"//SPDX-License-Identifier: BUSL-1.1\\npragma solidity 0.8.10;\\n\\nimport \\\"./libraries/Errors.sol\\\";\\n\\n/// @title Firewall\\n/// @author Figment\\n/// @notice This contract accepts calls to admin-level functions of an underlying contract, and\\n///         ensures the caller holds an appropriate role for calling that function. There are two roles:\\n///          - A Governor can call anything\\n///          - An Executor can call specific functions specified at construction\\n///         Random callers cannot call anything through this contract, even if the underlying function\\n///         is unpermissioned in the underlying contract.\\n///         Calls to non-admin functions should be called at the underlying contract directly.\\ncontract Firewall {\\n    mapping(bytes4 => bool) internal executorCanCall;\\n\\n    address public governor;\\n    address public executor;\\n    address internal destination;\\n\\n    // governor_ should be the most trustworthy entity in the underlying protocol - often, a DAO governor\\n    // executor_ should be a trustworthy entity that takes care of time-sensitive actions in the underlying protocol\\n    constructor(\\n        address governor_,\\n        address executor_,\\n        address destination_,\\n        bytes4[] memory executorCallableSelectors_\\n    ) {\\n        governor = governor_;\\n        executor = executor_;\\n        destination = destination_;\\n        for (uint256 i; i < executorCallableSelectors_.length; ) {\\n            executorCanCall[executorCallableSelectors_[i]] = true;\\n            unchecked {\\n                ++i;\\n            }\\n        }\\n    }\\n\\n    modifier ifGovernor() {\\n        if (msg.sender == governor) {\\n            _;\\n        } else {\\n            revert Errors.Unauthorized(msg.sender);\\n        }\\n    }\\n\\n    modifier ifGovernorOrExecutor() {\\n        if (msg.sender == governor || msg.sender == executor) {\\n            _;\\n        } else {\\n            revert Errors.Unauthorized(msg.sender);\\n        }\\n    }\\n\\n    /// @dev Change the governor\\n    function changeGovernor(address newGovernor) external ifGovernor {\\n        governor = newGovernor;\\n    }\\n\\n    /// @dev Change the executor\\n    function changeExecutor(address newExecutor) external ifGovernorOrExecutor {\\n        executor = newExecutor;\\n    }\\n\\n    /// @dev make a function either only callable by the governor, or callable by gov and executor.\\n    function permissionFunction(bytes4 functionSelector, bool executorCanCall_) external ifGovernor {\\n        executorCanCall[functionSelector] = executorCanCall_;\\n    }\\n\\n    /// @dev Validate that the caller is allowed to make the call in msg.sig\\n    function _checkCallerRole() internal view {\\n        if (msg.sender == governor || (executorCanCall[msg.sig] && msg.sender == executor)) {\\n            return;\\n        }\\n        revert Errors.Unauthorized(msg.sender);\\n    }\\n\\n    /// @dev Forwards the current call to `destination`.\\n    ///      This function does not return to its internal call site, it will return directly to the external caller.\\n    function _forward(address destination_, uint256 value) internal {\\n        assembly {\\n            // Copy msg.data. We take full control of memory in this inline assembly\\n            // block because it will not return to Solidity code. We overwrite the\\n            // Solidity scratch pad at memory position 0.\\n            calldatacopy(0, 0, calldatasize())\\n\\n            // Call the destination.\\n            // out and outsize are 0 because we don't know the size yet.\\n            let result := call(gas(), destination_, value, 0, calldatasize(), 0, 0)\\n\\n            // Copy the returned data.\\n            returndatacopy(0, 0, returndatasize())\\n\\n            switch result\\n            // call returns 0 on error.\\n            case 0 {\\n                revert(0, returndatasize())\\n            }\\n            default {\\n                return(0, returndatasize())\\n            }\\n        }\\n    }\\n\\n    function _fallback() internal virtual {\\n        _checkCallerRole();\\n        _forward(destination, msg.value);\\n    }\\n\\n    fallback() external payable virtual {\\n        _fallback();\\n    }\\n\\n    receive() external payable virtual {\\n        _fallback();\\n    }\\n}\\n\",\"keccak256\":\"0x7967d668345561eef9973599140b88bab3d146622cef7e6619d11e6db2354ab0\",\"license\":\"BUSL-1.1\"},\"contracts/src/libraries/Errors.sol\":{\"content\":\"//SPDX-License-Identifier: BUSL-1.1\\npragma solidity 0.8.10;\\n\\nlibrary Errors {\\n    error Unauthorized(address caller);\\n    error InvalidCall();\\n    error InvalidArgument();\\n}\\n\",\"keccak256\":\"0xf3d3cec3d3d583aac19da0ace05f7ee067d47fd67e2a1f5f3195d7cbc5329325\",\"license\":\"BUSL-1.1\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b5060405161060238038061060283398101604081905261002f9161011e565b600180546001600160a01b038087166001600160a01b03199283161790925560028054868416908316179055600380549285169290911691909117905560005b81518110156100ca57600160008084848151811061008f5761008f610215565b6020908102919091018101516001600160e01b0319168252810191909152604001600020805460ff191691151591909117905560010161006f565b505050505061022b565b80516001600160a01b03811681146100eb57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b80516001600160e01b0319811681146100eb57600080fd5b6000806000806080858703121561013457600080fd5b61013d856100d4565b9350602061014c8187016100d4565b935061015a604087016100d4565b60608701519093506001600160401b038082111561017757600080fd5b818801915088601f83011261018b57600080fd5b81518181111561019d5761019d6100f0565b8060051b604051601f19603f830116810181811085821117156101c2576101c26100f0565b60405291825284820192508381018501918b8311156101e057600080fd5b938501935b82851015610205576101f685610106565b845293850193928501926101e5565b989b979a50959850505050505050565b634e487b7160e01b600052603260045260246000fd5b6103c88061023a6000396000f3fe60806040526004361061005e5760003560e01c80639665b658116100435780639665b658146100d1578063c34c08e5146100f1578063e4c0aaf4146101115761006d565b80630c340a2414610075578063960d3ac3146100b15761006d565b3661006d5761006b610131565b005b61006b610131565b34801561008157600080fd5b50600154610095906001600160a01b031681565b6040516001600160a01b03909116815260200160405180910390f35b3480156100bd57600080fd5b5061006b6100cc3660046102ff565b610151565b3480156100dd57600080fd5b5061006b6100ec366004610362565b6101df565b3480156100fd57600080fd5b50600254610095906001600160a01b031681565b34801561011d57600080fd5b5061006b61012c366004610362565b610234565b610139610274565b60035461014f906001600160a01b0316346102da565b565b6001546001600160a01b03163314156101a7577fffffffff0000000000000000000000000000000000000000000000000000000082166000908152602081905260409020805482151560ff199091161790555050565b6040517f8e4a23d600000000000000000000000000000000000000000000000000000000815233600482015260240160405180910390fd5b6001546001600160a01b031633148061020257506002546001600160a01b031633145b156101a757600280546001600160a01b03831673ffffffffffffffffffffffffffffffffffffffff1990911617905550565b6001546001600160a01b03163314156101a757600180546001600160a01b03831673ffffffffffffffffffffffffffffffffffffffff1990911617905550565b6001546001600160a01b03163314806102d35750600080357fffffffff000000000000000000000000000000000000000000000000000000001681526020819052604090205460ff1680156102d357506002546001600160a01b031633145b156101a757565b366000803760008036600084865af13d6000803e8080156102fa573d6000f35b3d6000fd5b6000806040838503121561031257600080fd5b82357fffffffff000000000000000000000000000000000000000000000000000000008116811461034257600080fd5b91506020830135801515811461035757600080fd5b809150509250929050565b60006020828403121561037457600080fd5b81356001600160a01b038116811461038b57600080fd5b939250505056fea264697066735822122045792081be5bd869825098790ef3b2a27053863e953e6724671d45c7698b305364736f6c634300080a0033",
  "deployedBytecode": "0x60806040526004361061005e5760003560e01c80639665b658116100435780639665b658146100d1578063c34c08e5146100f1578063e4c0aaf4146101115761006d565b80630c340a2414610075578063960d3ac3146100b15761006d565b3661006d5761006b610131565b005b61006b610131565b34801561008157600080fd5b50600154610095906001600160a01b031681565b6040516001600160a01b03909116815260200160405180910390f35b3480156100bd57600080fd5b5061006b6100cc3660046102ff565b610151565b3480156100dd57600080fd5b5061006b6100ec366004610362565b6101df565b3480156100fd57600080fd5b50600254610095906001600160a01b031681565b34801561011d57600080fd5b5061006b61012c366004610362565b610234565b610139610274565b60035461014f906001600160a01b0316346102da565b565b6001546001600160a01b03163314156101a7577fffffffff0000000000000000000000000000000000000000000000000000000082166000908152602081905260409020805482151560ff199091161790555050565b6040517f8e4a23d600000000000000000000000000000000000000000000000000000000815233600482015260240160405180910390fd5b6001546001600160a01b031633148061020257506002546001600160a01b031633145b156101a757600280546001600160a01b03831673ffffffffffffffffffffffffffffffffffffffff1990911617905550565b6001546001600160a01b03163314156101a757600180546001600160a01b03831673ffffffffffffffffffffffffffffffffffffffff1990911617905550565b6001546001600160a01b03163314806102d35750600080357fffffffff000000000000000000000000000000000000000000000000000000001681526020819052604090205460ff1680156102d357506002546001600160a01b031633145b156101a757565b366000803760008036600084865af13d6000803e8080156102fa573d6000f35b3d6000fd5b6000806040838503121561031257600080fd5b82357fffffffff000000000000000000000000000000000000000000000000000000008116811461034257600080fd5b91506020830135801515811461035757600080fd5b809150509250929050565b60006020828403121561037457600080fd5b81356001600160a01b038116811461038b57600080fd5b939250505056fea264697066735822122045792081be5bd869825098790ef3b2a27053863e953e6724671d45c7698b305364736f6c634300080a0033",
  "devdoc": {
    "author": "Figment",
    "kind": "dev",
    "methods": {
      "changeExecutor(address)": {
        "details": "Change the executor"
      },
      "changeGovernor(address)": {
        "details": "Change the governor"
      },
      "permissionFunction(bytes4,bool)": {
        "details": "make a function either only callable by the governor, or callable by gov and executor."
      }
    },
    "title": "Firewall",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "notice": "This contract accepts calls to admin-level functions of an underlying contract, and         ensures the caller holds an appropriate role for calling that function. There are two roles:          - A Governor can call anything          - An Executor can call specific functions specified at construction         Random callers cannot call anything through this contract, even if the underlying function         is unpermissioned in the underlying contract.         Calls to non-admin functions should be called at the underlying contract directly.",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 272,
        "contract": "contracts/src/Firewall.sol:Firewall",
        "label": "executorCanCall",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_bytes4,t_bool)"
      },
      {
        "astId": 274,
        "contract": "contracts/src/Firewall.sol:Firewall",
        "label": "governor",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 276,
        "contract": "contracts/src/Firewall.sol:Firewall",
        "label": "executor",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 278,
        "contract": "contracts/src/Firewall.sol:Firewall",
        "label": "destination",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_bytes4": {
        "encoding": "inplace",
        "label": "bytes4",
        "numberOfBytes": "4"
      },
      "t_mapping(t_bytes4,t_bool)": {
        "encoding": "mapping",
        "key": "t_bytes4",
        "label": "mapping(bytes4 => bool)",
        "numberOfBytes": "32",
        "value": "t_bool"
      }
    }
  }
}